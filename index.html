<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Jumbotron Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="css/index.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-switch.css" rel="stylesheet">
    <link rel="stylesheet" href="css/font-awesome.css">

  </head>

  <body>
     <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="row">
          <div class="col-md-2">
            <div><img src="img/cosyverif.png" alt="Log image" class="img-thumbnail" height="100" width="100"></div>
          </div>
          <div class="col-md-4" style="padding-left:5px; padding-right:5px;">
            <div class="input-group" style="margin-top:8px;">
              <input type="text" class="form-control">
              <span class="input-group-btn">
                <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
              </span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="navbar-collapse collapse">
              <form class="navbar-form navbar-right" role="form">
                <div class="form-group">
                  <input id="emailPlaceHolder" placeholder="Username" class="form-control" type="text">
                </div>
                <div class="form-group">
                  <input id="passwordPlaceHolder" placeholder="Password" class="form-control" type="password">
                </div>
                <a href="#" onclick="loadPage('update-user');"><h4 id="usernameLabel" style="display:none; color:white"></h4></a>
                <button type="submit" id="btnLogin" class="btn btn-success" onclick="loginClick()">Log in</button>
                <button type="submit" id="btnSignUp" class="btn btn-success" onclick="newUser();">Sign up</button>
                <button type="submit" id="btnLogoff" class="btn btn-success" onclick="logoutClick()" style="display:none">Log Off</button>
              </form>
            </div><!--/.navbar-collapse -->
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
        <div class="span12">
          <div class="alert alert-info" role="alert">
            <a href="#" class="alert-link">It's notification</a>
          </div>
        </div>
        </div>
      </div>
    </div>
    <div class="container" style="margin-bottom:60px;">
      <div class="row">
        <div class="col-md-4" style="margin-bottom:10px;">
          <a href="#" class="fa fa-long-arrow-left" id="link-show-left-menu" rel="true" onclick="javascript:showLeftMenu();">Hide menu</a>
        </div>
      </div>
      <input type="hidden" id="page-show" />
      <input type="hidden" id="page-search-color" />
      <div class="row">
        <div id="left-menu" class="col-md-4">
        </div>
        <div id="resource-page" class="col-md-8">
        </div>
      </div>
    </div>
    <div class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">
      <div class="container">
        CosyVerif info server
      </div>
    </div>
    
    

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/bootstrap-switch.js"></script>
    <script src="js/handlebars.js"></script>
    <!-- <script src="template/project.template" type="text/x-handlebars-template"></script> -->
    <script src="js/index.js"></script>
    
<script id="template-search-menu" type="text/x-handlebars-template">
<div style="height:600px;">
  <div class="row">
    <div class="col-lg-12">
      <div class="input-group">
        <input type="text" class="form-control">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
        </span>
      </div>
    </div>
  </div>
  <div class="row" style="margin-top:30px;">
    <div class="col-md-8">
      <div class="navbar-brand">
        <a href="#">Projects</a>
      </div>
    </div>
    <div class="col-md-4">
      <div class="navbar-brand" style="float:right;">
        <a href="#"  rel="select-project-ok"  onclick="searchResources(this)"><i class="fa fa-check-square"></i></a>
        <a href="#"  rel="select-project-no"  onclick="searchResources(this)"><i class="fa fa-square"></i></a>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" id="menu-project-part" style="height:200px;overflow:auto;">
        {{{resource_list_projects}}}
    </div>
  </div>
  <div class="row">
    <div class="navbar-brand" style="float:right; margin-right:15px;">
      <a href="#" ><i class="fa fa-plus"></i></a>
    </div>
  </div>
  <div class="row" style="margin-top:30px;">
    <div class="col-md-8">
      <div class="navbar-brand">
        <a href="#">Types</a>
      </div>
    </div>
    <div class="col-md-4">
      <div class="navbar-brand" style="float:right;">
        <a href="#" rel="select-type-ok"  onclick="searchResources(this)"><i class="fa fa-check-square"></i></a>
        <a href="#"  rel="select-type-no" onclick="searchResources(this)"><i class="fa fa-square"></i></a>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="navbar-brand" id="menu-type-part" style="height:90px;">
      <div class="btn-group btn-group-justified">
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="searchResources(this)">Formalisms</button>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="searchResources(this)">Models</button>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="searchResources(this)">Converters</button>
        </div>
      </div>
      <div class="btn-group btn-group-justified">
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="searchResources(this)">Services</button>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="searchResources(this)">Executions</button>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="searchResources(this)">Scenarios</button>
        </div>
      </div>
    </div>
  </div>
</div>
</script>

<script id="template-project-menu" type="text/x-handlebars-template">
<div style="height:600px;">
  <div class="row">
    <div class="col-md-12">
      <span style="float:right;"><input type="checkbox" class="class-double-buttons" data-size="small" data-on-text="PRIVATE" data-off-text="PUBLIC" {{#unless is_public}} checked {{/unless}}></span>
    </div>
  </div>
  <div class="row" style="margin-top:10px;">
    <div class="col-md-10">
      <span id="project-title-label" style="display:none; font-weight:bold;">{{name}}</span>
      <input type="text" class="form-control" id="project-title-input" placeholder="Title" style="display:inline;">
    </div>
    <div class="col-md-2">
      <a href="#" id="project-title-button-update" style="display:none;float:right;" rel="project-title" onclick="javascript:updateProject(this);"><i class="fa fa-pencil-square-o"></i></a>
      <a href="#" id="project-title-button-cancel" style="display:inline;float:right;" rel="project-title" onclick="javascript:updateProject(this);"><i class="fa fa-undo"></i></a>
      <a href="#" id="project-title-button-save" style="display:inline;float:right;" rel="project-title" onclick="javascript:updateProject(this);"><i class="fa fa-check"></i></a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-10">
      <p id="project-description-label">{{description}}</p>
      <textarea id="project-description-input" class="form-control" rows="5" placeholder="Project description ..." style="display:none;" ></textarea>
    </div>
    <div class="col-md-2">
      <a href="#" id="project-description-button-update" style="display:inline;float:right;" rel="project-title" onclick="javascript:updateProject(this);"><i class="fa fa-pencil-square-o"></i></a>
      <a href="#" id="project-description-button-cancel" style="display:none;float:right;" rel="project-title" onclick="javascript:updateProject(this);"><i class="fa fa-undo"></i></a>
      <a href="#" id="project-description-button-save" style="display:none;float:right;" rel="project-title" onclick="javascript:updateProject(this);"><i class="fa fa-check"></i></a>
    </div>
  </div>
  <div class="row" style="margin-top:30px;">
    <div class="col-md-12">
      <span>Users :</span>
      <div style="height:150px;overflow:auto;">
        <table class="table table-bordered" style="margin-top:3px;margin-right:10px;">
          {{#each resource_list_users}}
            <tr>
              <td style="padding:0px;">{{this.name}}</td>
              <td style="padding:0px 5px 0px 5px;width:10px;"><input type="checkbox" class="class-double-buttons" name="my-checkbox" data-size="small" data-on-text="ADMIN" data-off-text="?" {{#if this.is_admin_project}} checked {{/if}}></td>
              <td style="padding:0px 5px 0px 5px;width:10px;"><input type="checkbox" class="class-double-buttons" name="my-checkbox" data-size="small" data-on-text="WRITE" data-off-text="READ" {{#if this.is_edit_project}} checked {{/if}}></td>
              <td style="padding-top:0px;padding-bottom:5px; width:10px;"><a href="#" onclick="javascript:deleteProjectUser('"+{{this.href}}+"');"><i class="fa fa-trash-o"></i></a></td>
            </tr>
          {{/each}}
        </table>
      </div>
    </div>
  </div>
  <div class="row" style="margin-top:30px;">
    <div class="col-md-8">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Invite">
        <span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-send"></i></button></span>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <textarea class="form-control" rows="2" placeholder="Invite comment ..."></textarea>
    </div>
  </div>
  <div class="row" style="margin-top:30px;">
    <div class="col-md-12">
      <span>Requests :</span>
      <div style="height:150px;overflow:auto;">
        <table class="table table-bordered" style="margin-top:3px;margin-right:10px;">
          {{#each resource_list_requests}}
            <tr>
              <td style="display:block;"><span style="font-weight:bold;">{{this.name}}</span><p>{{this.comment}}</p></td>
              <td style="display:none;">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Invite">
                  <span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-send"></i></button></span>
                </div>
              </td>
              <td style="width:60px;">
                <a href="#" id="project-description-button-update" style="display:inline;float:right;" rel="project-title" onclick="javascript:deleteProjectUser('"+{{this.href}}+"');"><i class="fa fa-comment"></i></a>
                <a href="#" id="project-description-button-cancel" style="display:inline;float:right;" rel="project-title" onclick="javascript:deleteProjectUser('"+{{this.href}}+"');"><i class="fa fa-thumbs-down"></i></a>
                <a href="#" id="project-description-button-save" style="display:inline;float:right;" rel="project-title" onclick="javascript:deleteProjectUser('"+{{this.href}}+"');"><i class="fa fa-thumbs-up"></i></a>
              </td>
            </tr>
          {{/each}}
        </table>
      </div>
    </div>
  </div>
</div>
</script>

<script id="template-project-content" type="text/x-handlebars-template">
<div class="row">
  <div class="col-md-4">
    <div class="input-group">
      <input type="text" class="form-control">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
      </span>
    </div>
  </div>
  <div class="col-md-3">
    <input type="checkbox" class="class-double-buttons" data-on-text="ByDate" data-off-text="ByName" checked>
  </div>
  <div class="col-md-3">
    <input type="checkbox" class="class-double-buttons" data-on-text="ASC" data-off-text="DESC" checked>
  </div>
</div>
<div class="row">
  <div class="col-md-12" style="margin-top:15px;">
    <ul class="nav nav-tabs" role="tablist" id="project-resource-nav-tabs">
      <li class="dropdown" >
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="formalism" onclick="javascript:showNavTabResources(this);">Formalisms</a>
      </li>
      <li class="dropdown" id="project-resource-nav-tabs-default">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="model" onclick="javascript:showNavTabResources(this);">Models</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="converter" onclick="javascript:showNavTabResources(this);">Converters</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="service" onclick="javascript:showNavTabResources(this);">Services</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="execution" onclick="javascript:showNavTabResources(this);">Executions</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="scenario" onclick="javascript:showNavTabResources(this);">Scenarios</a>
      </li>
    </ul>
  </div>
</div>
<div class="row">
  <div id="resource-list" class="col-md-12">

  </div>
</div>
<script lang="javascript">

function showNavTabResources(element)
{
  $("#project-resource-nav-tabs").children(".active").attr("class","dropdown");
  var varSearchColor = "";
  if (element == null)
  {
    $("#project-resource-nav-tabs-default").attr("class","active");
  }
  else
  {
    $(element).parent().attr("class","active");
  }

  if (element == null)
  {
    varSearchColor = "color-" + $("#project-resource-nav-tabs-default").children("a").attr("rel");
  }
  else if ($(element).attr("rel") == "formalism")
  {
    varSearchColor = "color-formalism";
  }
  else if ($(element).attr("rel") == "model")
  {
    varSearchColor = "color-model";
  }
  else if ($(element).attr("rel") == "converter")
  {
    varSearchColor = "color-converter";
  }
  else if ($(element).attr("rel") == "service")
  {
    varSearchColor = "color-service";
  }
  else if ($(element).attr("rel") == "execution")
  {
    varSearchColor = "color-execution";
  }
  else if ($(element).attr("rel") == "scenario")
  {
    varSearchColor = "color-scenario";
  }

  $("#page-search-color").val(varSearchColor);

  varSearchResults = [
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-converter","logo":true},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-service","logo":true},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-execution","logo":true},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-scenario","logo":true},
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Project","color":"color-project","logo":false},
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-user","logo":false},
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                          {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                          {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true}
                      ];

  showResultSearch(($("#left-menu").css('display') != "none"));
}

showNavTabResources(null);

function updateProject(link)
{
  if ($(link).attr("rel") == "project-title")
  {
    $("#project-title-input").val($("#project-title-label").val());
    $("#project-title-label").css("display", "none");
    $("#project-title-input").css("display", "block");
    $("#project-title-button-update").css("display", "none");
    $("#project-title-button-save").css("display", "block");
    $("#project-title-button-cancel").css("display", "block");
  }
}
</script>
</script>

<script id="template-user-menu" type="text/x-handlebars-template">
<div style="height:600px;">
  <div class="row" style="margin-top:10px;">
  <div class="col-md-12">
      <span style="float:right;"><input type="checkbox" class="class-double-buttons" data-size="small" data-on-text="PRIVATE" data-off-text="PUBLIC" {{#unless is_public}} checked {{/unless}}></span>
    </div>
  </div>
  <div class="row" style="margin-top:20px;">
    <div class="col-md-10">
      <span id="user-firstname-label" style="display:none; font-weight:bold;">{{firstname}}</span>
      <input type="text" class="form-control" id="user-firstname-input" placeholder="Firstname" style="display:inline;">
    </div>
    <div class="col-md-2">
      <a href="#" id="user-firstname-button-update" style="display:none;float:right;" rel="user-firstname" onclick="javascript:updateProject(this);"><i class="fa fa-pencil-square-o"></i></a>
      <a href="#" id="user-firstname-button-cancel" style="display:inline;float:right;" rel="user-firstname" onclick="javascript:updateProject(this);"><i class="fa fa-undo"></i></a>
      <a href="#" id="user-firstname-button-save" style="display:inline;float:right;" rel="user-firstname" onclick="javascript:updateProject(this);"><i class="fa fa-check"></i></a>
    </div>
  </div>
  <div class="row" style="margin-top:10px;">
    <div class="col-md-10">
      <span id="user-lastname-label" style="display:none; font-weight:bold;">{{lastname}}</span>
      <input type="text" class="form-control" id="user-lastname-input" placeholder="Lastname" style="display:inline;">
    </div>
    <div class="col-md-2">
      <a href="#" id="user-lastname-button-update" style="display:none;float:right;" rel="user-lastname" onclick="javascript:updateProject(this);"><i class="fa fa-pencil-square-o"></i></a>
      <a href="#" id="user-lastname-button-cancel" style="display:inline;float:right;" rel="user-lastname" onclick="javascript:updateProject(this);"><i class="fa fa-undo"></i></a>
      <a href="#" id="user-lastname-button-save" style="display:inline;float:right;" rel="user-lastname" onclick="javascript:updateProject(this);"><i class="fa fa-check"></i></a>
    </div>
  </div>
  <div class="row" style="margin-top:10px;">
    <div class="col-md-10">
      <span id="user-email-label" style="display:none; font-weight:bold;">{{email}}</span>
      <input type="text" class="form-control" id="user-email-input" placeholder="Email" style="display:inline;">
    </div>
    <div class="col-md-2">
      <a href="#" id="user-email-button-update" style="display:none;float:right;" rel="user-email" onclick="javascript:updateProject(this);"><i class="fa fa-pencil-square-o"></i></a>
      <a href="#" id="user-email-button-cancel" style="display:inline;float:right;" rel="user-email" onclick="javascript:updateProject(this);"><i class="fa fa-undo"></i></a>
      <a href="#" id="user-email-button-save" style="display:inline;float:right;" rel="user-email" onclick="javascript:updateProject(this);"><i class="fa fa-check"></i></a>
    </div>
  </div>
  <div class="row" style="margin-top:10px;">
    <div class="col-md-10">
      <span id="user-username-label" style="display:none; font-weight:bold;">{{username}}</span>
      <input type="text" class="form-control" id="user-username-input" placeholder="Username" style="display:inline;">
    </div>
    <div class="col-md-2">
      <a href="#" id="user-username-button-update" style="display:none;float:right;" rel="user-username" onclick="javascript:updateProject(this);"><i class="fa fa-pencil-square-o"></i></a>
      <a href="#" id="user-username-button-cancel" style="display:inline;float:right;" rel="user-username" onclick="javascript:updateProject(this);"><i class="fa fa-undo"></i></a>
      <a href="#" id="user-username-button-save" style="display:inline;float:right;" rel="user-username" onclick="javascript:updateProject(this);"><i class="fa fa-check"></i></a>
    </div>
  </div>
  <div class="row" style="margin-top:40px;">
    <div class="col-md-12">
      <div style="width:100%;"><span>Projects :</span><span style="float:right;"><a href="#" ><i class="fa fa-plus fa-1x"></i></a></span></div>
      <div style="height:150px;overflow:auto;margin-top:5px;">
        <table class="table table-bordered">
          {{#each resource_list_projects}}
            <tr>
              <td style="padding:0px;">{{this.name}}</td>
              <td style="padding:0px 5px 0px 5px;width:150px;">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Invite">
                  <span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-send"></i></button></span>
                </div>
              </td>
              <td style="padding-top:0px;padding-bottom:5px; width:10px;">
                <a href="#" onclick="javascript:deleteProject('"+{{this.href}}+"');"><i class="fa fa-trash-o"></i></a>
              </td>
            </tr>
          {{/each}}
        </table>
      </div>
    </div>
  </div>
  <div class="row" style="margin-top:30px;">
    <div class="col-md-8">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Join">
        <span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-send"></i></button></span>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <textarea class="form-control" rows="2" placeholder="Join comment ..."></textarea>
    </div>
  </div>
</div>
</script>

<script id="template-user-content" type="text/x-handlebars-template">
<div class="row">
  <div class="col-md-4">
    <div class="input-group">
      <input type="text" class="form-control">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
      </span>
    </div>
  </div>
  <div class="col-md-3">
    <input type="checkbox" class="class-double-buttons" data-on-text="ByDate" data-off-text="ByName" checked>
  </div>
  <div class="col-md-3">
    <input type="checkbox" class="class-double-buttons" data-on-text="ASC" data-off-text="DESC" checked>
  </div>
</div>
<div class="row">
  <div class="col-md-12" style="margin-top:15px;">
    <ul class="nav nav-tabs" role="tablist" id="user-resource-nav-tabs">
      <li class="active">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="formalism" onclick="javascript:showNavTabResources(this);">Formalisms</a>
      </li>
      <li class="dropdown"  id="user-resource-nav-tabs-default">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="model" onclick="javascript:showNavTabResources(this);">Models</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="converter" onclick="javascript:showNavTabResources(this);">Converters</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="service" onclick="javascript:showNavTabResources(this);">Services</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="execution" onclick="javascript:showNavTabResources(this);">Executions</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="scenario" onclick="javascript:showNavTabResources(this);">Scenarios</a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" rel="project" onclick="javascript:showNavTabResources(this);">Projects</a>
      </li>
    </ul>
  </div>
</div>
<div class="row">
  <div id="resource-list" class="col-md-12">

  </div>
</div>
<script lang="javascript">
function showNavTabResources(element)
{
  $("#user-resource-nav-tabs").children(".active").attr("class","dropdown");
  var varSearchColor = "";
  if (element == null)
  {
    $("#user-resource-nav-tabs-default").attr("class","active");
  }
  else
  {
    $(element).parent().attr("class","active");
  }

  if (element == null)
  {
    varSearchColor = "color-" + $("#user-resource-nav-tabs-default").children("a").attr("rel");
  }
  else if ($(element).attr("rel") == "project")
  {
    varSearchColor = "color-project";
  }
  else if ($(element).attr("rel") == "formalism")
  {
    varSearchColor = "color-formalism";
  }
  else if ($(element).attr("rel") == "model")
  {
    varSearchColor = "color-model";
  }
  else if ($(element).attr("rel") == "converter")
  {
    varSearchColor = "color-converter";
  }
  else if ($(element).attr("rel") == "service")
  {
    varSearchColor = "color-service";
  }
  else if ($(element).attr("rel") == "execution")
  {
    varSearchColor = "color-execution";
  }
  else if ($(element).attr("rel") == "scenario")
  {
    varSearchColor = "color-scenario";
  }

  $("#page-search-color").val(varSearchColor);

  varSearchResults = [
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-converter","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-service","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-execution","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-scenario","logo":true},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Project","color":"color-project","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-user","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true}
                      ];

  showResultSearch(($("#left-menu").css('display') != "none"));
}

  showNavTabResources(null);

  function updateProject(link)
  {
    if ($(link).attr("rel") == "user-title")
    {
      $("#user-title-input").val($("#user-title-label").val());
      $("#user-title-label").css("display", "none");
      $("#user-title-input").css("display", "block");
      $("#user-title-button-update").css("display", "none");
      $("#user-title-button-save").css("display", "block");
      $("#user-title-button-cancel").css("display", "block");
    }
  }
</script>
</script>

<script id="template-search-result" type="text/x-handlebars-template">
<div class="{{color}}" style="margin:5px;height:150px;padding:5px 5px 0px 5px;color: inherit; border-radius: 6px;">
  <div style="float:right;">
    <a href="#" style="display:inline;" onclick="javascript:copyResource('{{href}}');" data-toggle="modal" data-target="#modal-copy-move"><i class="fa fa-files-o"></i></a>
    <a href="#" style="display:inline;" onclick="javascript:moveResource('{{href}}');" data-toggle="modal" data-target="#modal-copy-move"><i class="fa fa-scissors"></i></a>
    <a href="#" style="display:inline;" onclick="javascript:deleteResource('{{href}}');" data-toggle="modal" data-target="#modal-copy-move"><i class="fa fa-trash-o"></i></a>
  </div>
  <a href="#" rel="{{type}}" onclick="javascript:showResource(this,'{{href}}');">
    <div style="width:100%;height:100%;">
      <div><i {{#if logo}} class="fa fa-user" {{else}} class="fa fa-group" {{/if}}></i> <span>{{project}}</span></div>
      <div style="display:block;margin-top:10px;font-weight:bold;">{{title}}</div>
      <p style="margin-top:5px;">{{description}}</p>
      <div style="margin-top:5px;float:right;">{{type}}</div>
    </div>
  </a>
</div>
</script>

<script id="template-modal" type="text/x-handlebars-template">
<div class="modal fade" id="modal-copy-move" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">{{title}}</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control">
              <span class="input-group-btn">
                <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
              </span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <select multiple class="form-control" size="10" style="margin-top:3px;" onclick="javascript: document.getElementById('modal-button-ok').disabled = ''">
              <option>User en cours</option>
              <option>Project 1</option>
              <option>Project 2</option>
              <option>Project 3</option>
              <option>Project 4</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="modal-button-ok" disabled="true" type="button" class="btn btn-primary" data-dismiss="modal" onclick="javascript:actionResource('{{action}}','{{src}}')" >Ok</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button> 
      </div>
    </div>
  </div>
</div>
<script lang="javascript">
  function actionResource (action, src) {
    if (action == "copy"){
      alert("copy " +src);
    }
    else if (action == "move")
    {
      alert("move " + src);
    }
  }
</script>
</script>

  
<script lang="javascript">

function showLeftMenu()
{
  if ($("#link-show-left-menu").attr("rel") == "true")
  {
    $("#link-show-left-menu").attr("rel","false");
    $("#link-show-left-menu").text("Show menu");
    $("#link-show-left-menu").attr("class","fa fa-long-arrow-right");
    $("#left-menu").css('display', 'none')
                   .css('visibility','hidden');
    $("#resource-page").attr("class","col-md-12");

    if ($("#page-show").val() == "search" || $("#page-show").val() == "project" || $("#page-show").val() == "user")
    {
      showResultSearch(false);
    }
  }
  else
  {
    $("#link-show-left-menu").attr("rel","true");
    $("#link-show-left-menu").text("Hide menu");
    $("#link-show-left-menu").attr("class","fa fa-long-arrow-left");
    $("#left-menu").css('display', 'block')
                   .css('visibility','visible');
    $("#resource-page").attr("class","col-md-8");

    if ($("#page-show").val() == "search" || $("#page-show").val() == "project" || $("#page-show").val() == "user")
    {
      showResultSearch(true);
    }
  }
}

function showSearch()
{
  $("#page-show").val("search");

  $("#resource-page").html('<div class="row"><div class="col-md-3 col-md-offset-3"><input type="checkbox" class="class-double-buttons" data-on-text="ByDate" data-off-text="ByName" checked></div><div class="col-md-3 col-md-offset-1"><input type="checkbox" class="class-double-buttons" data-on-text="ASC" data-off-text="DESC" checked></div></div>');

  var varProjects = {"resource_list_projects" : [{"name":"User","href":"/lien/user"},
                                                 {"name":"Project 1","href":"/lien/projet1"},
                                                 {"name":"Project 2","href":"/lien/projet2"},
                                                 {"name":"Project 3","href":"/lien/projet3"},
                                                 {"name":"Project 4","href":"/lien/projet4"},
                                                 {"name":"Project 5","href":"/lien/projet5"},
                                                 {"name":"Project 6","href":"/lien/projet6"},
                                                 {"name":"Project 7","href":"/lien/projet7"},
                                                 {"name":"Project 8","href":"/lien/projet8"},
                                                 {"name":"Project 9","href":"/lien/projet9"},
                                                 {"name":"Project 10","href":"/lien/projet10"},
                                                 {"name":"Project 11","href":"/lien/projet11"},
                                                 {"name":"Project 12","href":"/lien/projet12"}
                      ]
      };
  
  varProjectsHtml ="";
  for (var i = 0; i < varProjects.resource_list_projects.length; i++) 
  { 
    var htmlCode = "";
    for (var j = i; j < varProjects.resource_list_projects.length && j < i + 3; j++) 
    {
      htmlCode += '<div class="btn-group"><button type="button" class="btn btn-default" onclick="searchResources(this)">'+ varProjects.resource_list_projects[j].name +'</button></div>';
    }
    varProjectsHtml +='<div class="btn-group btn-group-justified">'+htmlCode+'</div>';
    i = j - 1;
  }
  varProjects = {"resource_list_projects":varProjectsHtml};
  
  var source = $("#template-search-menu").html();
  template = Handlebars.compile(source);
  $("#left-menu").html(template(varProjects));

  searchResources(null);

  $("#link-show-left-menu").attr("rel","false");
  showLeftMenu();

  $("[class='class-double-buttons']").bootstrapSwitch();
}

showSearch();

function searchResources(element)
{
  if (element == null);
  else if ($(element).attr("class") == "btn btn-primary")
  {
    $(element).attr("class","btn btn-default");
  } 
  else if ($(element).attr("class") == "btn btn-default")
  {
    $(element).attr("class","btn btn-primary");
  }
  else if ($(element).attr("rel") == "select-project-ok")
  {
    $("#menu-project-part").children().find("button").attr("class","btn btn-primary");
  }
  else if ($(element).attr("rel") == "select-project-no")
  {
    $("#menu-project-part").children().find("button").attr("class","btn btn-default");
  }
  else if ($(element).attr("rel") == "select-type-ok")
  {
    $("#menu-type-part").children().find("button").attr("class","btn btn-primary");
  }
  else if ($(element).attr("rel") == "select-type-no")
  {
    $("#menu-type-part").children().find("button").attr("class","btn btn-default");
  }

  $("#resource-page").append('<div class="row"><div id="resource-list" class="col-md-12"></div></div>');

  varSearchResults = [
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-converter","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-service","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-execution","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-scenario","logo":true},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Project","color":"color-project","logo":false},
                      {"title": "User","description":"User description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "User","color":"color-user","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "model 1","description":"Model description .... ... ... ... ...","href":"/users/rokysaroi","project" : "Projet 1","type" : "Model","color":"color-model","logo":false},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true},
                      {"title": "Formalism 1","description":"Formalism description .... ... ... ... ...","href":"/users/rokysaroi","project" : "User 1","type" : "Formalism","color":"color-formalism","logo":true}
                    ]

    showResultSearch(true);
}

function showResultSearch(isMenuShow)
{
  var length = (isMenuShow)? 4 : 6;

  var htmlCode = "";

  if ($("#page-show").val() != "search")
  {
    htmlCode += '<div class="row"><div class="col-md-'+((isMenuShow)? 3 : 2)+'" style="padding:2px;"><a href="#" click="javascript:showResource(this);" style=""><div class="'+$("#page-search-color").val()+'" style="margin:5px;height:150px;padding-top:24%; padding-left:30%;color: inherit; border-radius: 6px;"><i class="fa fa-plus-circle fa-5x"></i></div></a></div>';
    var j = 2;
  }
  else
    var j = 1;
  for (var i = 0; i < varSearchResults.length; i++) 
  {
    if (j == 1)
      htmlCode += '<div class="row">';

    htmlCode +='<div class="col-md-'+((isMenuShow)? 3 : 2)+'" style="padding:2px;">';
    var source = $("#template-search-result").html();
    template = Handlebars.compile(source);
    htmlCode += template(varSearchResults[i]);
    htmlCode += '</div>';

    if (j == length)
    {
      htmlCode += '</div>';
      j = 1;
    } 
    else
      j++; 
  }
  if (j < length)
    htmlCode += '</div>';
  $("#resource-list").html(htmlCode);
  $("#resource-list").append('<div id="search-modal"></div>');
}

function showResource(element, url)
{
  if ($(element).attr("rel") == "Project")
  {
    showProject(url);
  }
  else if ($(element).attr("rel") == "User")
  {
    showUser(url);
  }
}

function showProject(url)
{
  $("#page-show").val("project");

  var resource_list = {"name":"Projet 1",
                       "description":"Project description ......",
                       "is_public" : true,
                       "resource_list_users": [
                            {"name": "User 1","href":"/users/rokysaroi","is_admin_project" : true,"is_edit_project" : true},
                            {"name": "User 2","href":"/users/rokysaroi","is_admin_project" : true,"is_edit_project" : false},
                            {"name": "User 3","href":"/users/rokysaroi","is_admin_project" : false,"is_edit_project" : true},
                            {"name": "User 4","href":"/users/rokysaroi","is_admin_project" : false,"is_edit_project" : false}
                        ],
                      "resource_list_requests": [
                            {"name": "User 1","href":"/users/rokysaroi","comment" : "aaa a a aaa  aaaa  aa"},
                            {"name": "User 2","href":"/users/rokysaroi","comment" : "aaa a a aaa  aaaa  aa"},
                            {"name": "User 3","href":"/users/rokysaroi","comment" : "aaa a a aaa  aaaa  aa"},
                            {"name": "User 4","href":"/users/rokysaroi","comment" : "aaa a a aaa  aaaa  aa"}
                        ]
                      };
  var source = $("#template-project-menu").html();
  var template = Handlebars.compile(source);
  $("#left-menu").html(template(resource_list));

  $("#link-show-left-menu").attr("rel","false");
  showLeftMenu();

  var source = $("#template-project-content").html();
  var template = Handlebars.compile(source);
  $('#resource-page').html("")
                     .append(template(resource_list));

  $("[class='class-double-buttons']").bootstrapSwitch();
}

function showUser(url)
{
  $("#page-show").val("user");

  var resource_list = {"name":"Projet 1",
                       "description":"Project description ......",
                       "is_public" : true,
                       "resource_list_projects": [
                            {"name": "User 1","href":"/users/rokysaroi","is_admin_project" : true,"is_edit_project" : true},
                            {"name": "User 2","href":"/users/rokysaroi","is_admin_project" : true,"is_edit_project" : false},
                            {"name": "User 3","href":"/users/rokysaroi","is_admin_project" : false,"is_edit_project" : true},
                            {"name": "User 4","href":"/users/rokysaroi","is_admin_project" : false,"is_edit_project" : false}
                        ]
                      };
  var source = $("#template-user-menu").html();
  var template = Handlebars.compile(source);
  $("#left-menu").html(template(resource_list));

  $("#link-show-left-menu").attr("rel","false");
  showLeftMenu();

  var source = $("#template-user-content").html();
  var template = Handlebars.compile(source);
  $('#resource-page').html("")
                     .append(template(resource_list));

  $("[class='class-double-buttons']").bootstrapSwitch();
}

function copyResource(href)
{
  var params = {"title":"Copy",
                "action":"copy",
                "src" : href};
  var source = $("#template-modal").html();
  template = Handlebars.compile(source);
  $("#search-modal").html(template(params)); 
} 

function moveResource(href)
{
  var params = {"title":"Move",
                "action":"move",
                "src" : href};
  var source = $("#template-modal").html();
  template = Handlebars.compile(source);
  $("#search-modal").html(template(params)); 
}
      
function loginClick(){
    setUserLogin(0);
    setUserName(document.getElementById("emailPlaceHolder").value);
}

function logoutClick(){
    setUserLogin(1);
}

function setUserLogin(value){
    window.sessionStorage.setItem("userLogin", value);
}

function getUserLogin(value){
    return window.sessionStorage.getItem("userLogin", value);
}

function setUserName(value){
    window.sessionStorage.setItem("userName", value);
}

function getUserName(value){
    return window.sessionStorage.getItem("userName", value);
}

if(getUserLogin() == 0){
    // User is loged in
    document.getElementById("btnLogin").style.display = 'none';
    document.getElementById("btnSignUp").style.display = 'none';
    document.getElementById("emailPlaceHolder").style.display = 'none';
    document.getElementById("passwordPlaceHolder").style.display = 'none';
    document.getElementById("btnLogoff").style.display = 'inline';
    document.getElementById("usernameLabel").style.display = 'inline';
    document.getElementById("usernameLabel").innerHTML = "Welcome, " + getUserName();
} else {
    // User NOT is loged in
    document.getElementById("btnLogin").style.display = 'inline';
    document.getElementById("btnSignUp").style.display = 'inline';
    document.getElementById("emailPlaceHolder").style.display = 'inline';
    document.getElementById("passwordPlaceHolder").style.display = 'inline';
    document.getElementById("btnLogoff").style.display = 'none';
    document.getElementById("usernameLabel").style.display = 'none';
}
</script>

</body></html>
