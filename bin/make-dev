#! /bin/bash

current=$(pwd)
dir=$(mktemp -d --tmpdir=/tmp XXXXXX.cosy)
echo "Working in ${dir}"
cd ${dir}

curl https://raw.githubusercontent.com/mbostock/d3/master/d3.min.js \
  -o ${current}/js/d3.min.js

git clone https://github.com/CosyVerif/lua.vm.js.git
mv lua.vm.js/dist/lua.vm.js ${current}/js/
mv lua.vm.js/dist/js/*      ${current}/js/
mv lua.vm.js/dist/css/*     ${current}/css/

rm -rf ${current}/lua/cosy
git clone https://github.com/CosyVerif/library.git
mv library/src/cosy ${current}/lua/

curl https://raw.githubusercontent.com/LuaDist/dkjson/master/dkjson.lua \
  -o ${current}/lua/dkjson.lua

curl https://raw.githubusercontent.com/kikito/sha1.lua/master/sha1.lua \
  -o ${current}/lua/sha1.lua

cd ${current}
rm -rf ${dir}
